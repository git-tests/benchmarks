--! @file
--
--! @brief Address decode logic for ipbus fabric. Given an address it returns which slave is addressed.
--
--! @details
--! This file has been AUTOGENERATED from the address table - do not hand edit
--!
--! We assume the synthesis tool is clever enough to recognise 
--! exclusive conditions in the if statement.
--
--! @author Dave Newbold
--! @date February 2011

library IEEE;
use IEEE.STD_LOGIC_1164.all;
use ieee.numeric_std.all;
use work.ipbus.all;

package ipbus_addr_decode is

  function ipbus_addr_sel(signal addr : in std_logic_vector(31 downto 0)) return integer;

end ipbus_addr_decode;

package body ipbus_addr_decode is

  function ipbus_addr_sel(signal addr : in std_logic_vector(31 downto 0)) return integer is
    variable sel : integer;
  begin
		if    std_match(addr, "-----------------000--000-----00") then
			sel := 0; -- firmwareid / base 00000000 / mask 00000000
		elsif std_match(addr, "-----------------000--000-----01") then
			sel := 1; -- gpio / base 00000001 / mask 00000000
		elsif std_match(addr, "-----------------000--000-----10") then
			sel := 2; -- select / base 00000002 / mask 00000000
		elsif std_match(addr, "-----------------000--000-----11") then
			sel := 3; -- mask / base 00000003 / mask 00000000
		elsif std_match(addr, "-----------------000--001-------") then
			sel := 4; -- scshiftreg / base 00000080 / mask 0000007f
		elsif std_match(addr, "-----------------000--010-------") then
			sel := 5; -- rshiftreg / base 00000100 / mask 0000007f
		elsif std_match(addr, "-----------------000--110-------") then
			sel := 6; -- triggerctrl / base 00000300 / mask 00000007
		elsif std_match(addr, "-----------------001------------") then
			sel := 7; -- adcctrl0 / base 00001000 / mask 00000fff
		elsif std_match(addr, "-----------------010------------") then
			sel := 8; -- adcctrl1 / base 00002000 / mask 00000fff
		elsif std_match(addr, "-----------------011------------") then
			sel := 9; -- adcctrl2 / base 00003000 / mask 00000fff
		elsif std_match(addr, "-----------------100------------") then
			sel := 10; -- adcctrl3 / base 00004000 / mask 00000fff
		elsif std_match(addr, "-----------------101------------") then
			sel := 11; -- adcctrl4 / base 00005000 / mask 00000fff
		elsif std_match(addr, "-----------------110------------") then
			sel := 12; -- hostemac / base 00006000 / mask 00000fff
		else
			sel := 99;
		end if;
		return sel;
	end ipbus_addr_sel;
 
end ipbus_addr_decode;
